{
  "tier": 3,
  "name": "CPP/EI Boundary Conditions - 2026 Jan Edition",
  "description": "Tests for CPP/EI boundary conditions: YMPE, YAMPE, MIE, exemptions",
  "version": "2026-01",
  "collected_date": "2025-12-30",
  "pdoc_version": "T4127 - 122nd Edition (January 2026)",
  "tolerance": "0.05",
  "notes": "2026: CPP YMPE $74,600, YAMPE $85,000, basic exemption $3,500, rate 5.95%. EI MIE $68,900, rate 1.63%.",

  "test_cases": [
    {
      "id": "BELOW_CPP_EXEMPTION",
      "tier": 3,
      "description": "Income below CPP basic exemption - no CPP deduction",
      "status": "VERIFIED",
      "category": "cpp_boundary",
      "special_rules": ["Below basic exemption"],
      "input": {
        "province": "ON",
        "gross_pay": "100.00",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0"
      },
      "pdoc_expected": {
        "cpp_total": "0.00",
        "cpp_enhancement_f2": "0.00",
        "cpp2": "0.00",
        "ei": "1.63",
        "federal_tax": "0.00",
        "provincial_tax": "0.00",
        "total_deductions": "1.63",
        "net_pay": "98.37"
      },
      "notes": "2026: $100/biweekly = $2,600 annual < $3,500 exemption"
    },
    {
      "id": "AT_YMPE_BOUNDARY",
      "tier": 3,
      "description": "Income at YMPE boundary - full CPP, no CPP2",
      "status": "VERIFIED",
      "category": "cpp_boundary",
      "special_rules": ["At YMPE boundary"],
      "input": {
        "province": "ON",
        "gross_pay": "2869.23",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0"
      },
      "pdoc_expected": {
        "cpp_total": "162.71",
        "cpp_enhancement_f2": "27.35",
        "cpp2": "0.00",
        "ei": "46.77",
        "federal_tax": "314.61",
        "provincial_tax": "169.63",
        "total_deductions": "693.72",
        "net_pay": "2175.51"
      },
      "notes": "2026: $74,600 YMPE / 26 = $2,869.23. No CPP2 expected."
    },
    {
      "id": "ABOVE_YMPE_CPP2",
      "tier": 3,
      "description": "Income above YMPE but below YAMPE - CPP2 kicks in",
      "status": "VERIFIED",
      "category": "cpp_boundary",
      "special_rules": ["CPP2 active"],
      "input": {
        "province": "ON",
        "gross_pay": "3076.92",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0"
      },
      "pdoc_expected": {
        "cpp_total": "175.07",
        "cpp_enhancement_f2": "29.42",
        "cpp2": "0.00",
        "ei": "50.15",
        "federal_tax": "356.76",
        "provincial_tax": "188.45",
        "total_deductions": "770.43",
        "net_pay": "2306.49"
      },
      "notes": "2026: $80,000 annual > YMPE $74,600. CPP2 only applies after YTD exceeds YMPE. First pay period has no CPP2."
    },
    {
      "id": "AT_YAMPE_BOUNDARY",
      "tier": 3,
      "description": "Income at YAMPE boundary - max CPP + CPP2",
      "status": "VERIFIED",
      "category": "cpp_boundary",
      "special_rules": ["At YAMPE boundary"],
      "input": {
        "province": "ON",
        "gross_pay": "3269.23",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0"
      },
      "pdoc_expected": {
        "cpp_total": "186.51",
        "cpp_enhancement_f2": "31.35",
        "cpp2": "0.00",
        "ei": "53.29",
        "federal_tax": "395.79",
        "provincial_tax": "205.87",
        "total_deductions": "841.46",
        "net_pay": "2427.77"
      },
      "notes": "2026: $85,000 YAMPE / 26 = $3,269.23. First pay period so no CPP2 yet (CPP2 only kicks in after YTD exceeds YMPE)."
    },
    {
      "id": "AT_EI_MIE",
      "tier": 3,
      "description": "Income at EI MIE boundary - approaching max EI",
      "status": "VERIFIED",
      "category": "ei_boundary",
      "special_rules": ["At MIE boundary"],
      "input": {
        "province": "ON",
        "gross_pay": "2650.00",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0"
      },
      "pdoc_expected": {
        "cpp_total": "149.67",
        "cpp_enhancement_f2": "25.15",
        "cpp2": "0.00",
        "ei": "43.20",
        "federal_tax": "271.64",
        "provincial_tax": "144.55",
        "total_deductions": "609.06",
        "net_pay": "2040.94"
      },
      "notes": "2026: $68,900 MIE / 26 = $2,650. At EI maximum boundary."
    },
    {
      "id": "CPP_EXEMPT",
      "tier": 3,
      "description": "CPP exempt employee - no CPP deduction",
      "status": "VERIFIED",
      "category": "exemption",
      "special_rules": ["CPP exempt"],
      "input": {
        "province": "ON",
        "gross_pay": "2307.69",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0",
        "cpp_exempt": true
      },
      "pdoc_expected": {
        "cpp_total": "0.00",
        "cpp_enhancement_f2": "0.00",
        "cpp2": "0.00",
        "ei": "37.62",
        "federal_tax": "224.83",
        "provincial_tax": "122.10",
        "total_deductions": "384.55",
        "net_pay": "1923.14"
      },
      "notes": "2026: CPP exempt employee - no CPP deductions"
    },
    {
      "id": "EI_EXEMPT",
      "tier": 3,
      "description": "EI exempt employee - no EI deduction",
      "status": "VERIFIED",
      "category": "exemption",
      "special_rules": ["EI exempt"],
      "input": {
        "province": "ON",
        "gross_pay": "2307.69",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0",
        "ei_exempt": true
      },
      "pdoc_expected": {
        "cpp_total": "129.30",
        "cpp_enhancement_f2": "21.73",
        "cpp2": "0.00",
        "ei": "0.00",
        "federal_tax": "210.58",
        "provincial_tax": "116.58",
        "total_deductions": "456.46",
        "net_pay": "1851.23"
      },
      "notes": "2026: EI exempt employee - no EI deductions"
    },
    {
      "id": "CPP2_EXEMPT_HIGH_INCOME",
      "tier": 3,
      "description": "CPP2 exempt high income - CPP but no CPP2",
      "status": "PDOC_NOT_SUPPORTED",
      "category": "exemption",
      "special_rules": ["CPP2 exempt", "High income"],
      "input": {
        "province": "ON",
        "gross_pay": "3500.00",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-01-16",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "0",
        "ytd_pensionable_earnings": "0",
        "ytd_insurable_earnings": "0",
        "ytd_cpp_base": "0",
        "ytd_cpp_additional": "0",
        "ytd_ei": "0",
        "cpp2_exempt": true
      },
      "pdoc_expected": {
        "cpp_total": "200.24",
        "cpp_enhancement_f2": "33.65",
        "cpp2": "0.00",
        "ei": "57.05",
        "federal_tax": "442.63",
        "provincial_tax": "226.77",
        "total_deductions": "926.69",
        "net_pay": "2573.31"
      },
      "notes": "2026: PDOC does not support CPP2-only exemption. Values shown are from standard calculation. CPP2 is 0.00 in first pay period since YTD < YMPE. Our system should enforce cpp2_exempt flag to always produce CPP2=0."
    },
    {
      "id": "YTD_NEAR_CPP_MAX",
      "tier": 3,
      "description": "YTD near CPP max - partial CPP deduction",
      "status": "VERIFIED",
      "category": "ytd_boundary",
      "special_rules": ["YTD near max", "EI maxed out"],
      "input": {
        "province": "ON",
        "gross_pay": "2307.69",
        "pay_frequency": "biweekly",
        "pay_periods": 26,
        "pay_date": "2026-11-27",
        "federal_claim": "16452.00",
        "provincial_claim": "12989.00",
        "rrsp": "0",
        "union_dues": "0",
        "ytd_gross": "68907.57",
        "ytd_pensionable_earnings": "68907.57",
        "ytd_insurable_earnings": "68900.00",
        "ytd_cpp_base": "4100.00",
        "ytd_cpp_additional": "0",
        "ytd_ei": "1123.07"
      },
      "pdoc_expected": {
        "cpp_total": "129.30",
        "cpp_enhancement_f2": "21.73",
        "cpp2": "0.00",
        "ei": "0.00",
        "federal_tax": "201.23",
        "provincial_tax": "113.21",
        "total_deductions": "443.74",
        "net_pay": "1863.95"
      },
      "notes": "2026: YTD CPP base $4,100 near max $4,230.45, EI already at max $1,123.07. EI deduction is 0 since YTD EI has reached max. Verified 2025-12-30."
    }
  ]
}
